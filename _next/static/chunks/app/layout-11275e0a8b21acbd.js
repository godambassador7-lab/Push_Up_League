(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185,251],{6246:function(e,t,a){Promise.resolve().then(a.bind(a,5832)),Promise.resolve().then(a.t.bind(a,7335,23))},5832:function(e,t,a){"use strict";a.d(t,{AppWrapper:function(){return h}});var s=a(7437),r=a(2265);let i=e=>{let{onLoadComplete:t}=e,[a,i]=(0,r.useState)(0);return(0,r.useEffect)(()=>{let e=setInterval(()=>{i(a=>{let s=a+1.3333333333333333;return s>=100?(clearInterval(e),setTimeout(()=>{null==t||t()},200),100):s})},20);return()=>clearInterval(e)},[t]),(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-dark",children:[(0,s.jsxs)("div",{className:"absolute inset-0 opacity-30",children:[(0,s.jsx)("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-accent/20 rounded-full blur-3xl animate-pulse"}),(0,s.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-electric-blue/20 rounded-full blur-3xl animate-pulse delay-150"})]}),(0,s.jsxs)("div",{className:"relative z-10 flex flex-col items-center gap-8",children:[(0,s.jsx)("div",{className:"relative w-32 h-32 animate-fade-in",children:(0,s.jsx)("img",{src:"".concat("/Push_Up_League","/logo.png"),alt:"Push Up League",className:"w-full h-full object-contain drop-shadow-2xl"})}),(0,s.jsxs)("div",{className:"w-80 space-y-3",children:[(0,s.jsxs)("div",{className:"relative h-3 bg-dark-card rounded-full overflow-hidden border border-dark-border",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-accent/30 to-transparent animate-shimmer",style:{backgroundSize:"200% 100%"}}),(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-accent via-electric-blue to-cyan-bright rounded-full transition-all duration-300 ease-out",style:{width:"".concat(a,"%"),boxShadow:"0 0 20px rgba(0, 188, 212, 0.5)"},children:(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shine"})})]}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("span",{className:"text-2xl font-bold font-display bg-gradient-to-r from-accent via-electric-blue to-cyan-bright bg-clip-text text-transparent",children:[Math.round(a),"%"]})})]}),(0,s.jsx)("div",{className:"text-gray-400 text-sm uppercase tracking-widest animate-pulse",children:"Initializing..."})]})]})};var n=a(8251),o=a(3754),l=a(6784),c=a(4891),u=a(7721);let d=e=>{let{achievement:t,onClose:a,autoCloseDuration:i=5e3}=e,[n,o]=(0,r.useState)(!1),[l,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{setTimeout(()=>o(!0),10);let e=setTimeout(()=>{m()},i);return()=>clearTimeout(e)},[i]);let m=()=>{d(!0),setTimeout(()=>{a()},300)};return(0,s.jsx)("div",{className:"fixed top-20 right-4 sm:right-6 z-[100] transition-all duration-300 ".concat(n&&!l?"translate-x-0 opacity-100":"translate-x-full opacity-0"),children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-warning via-accent to-warning rounded-lg opacity-75 blur-sm animate-shine-border"}),(0,s.jsxs)("div",{className:"relative glass border-2 border-warning rounded-lg p-4 sm:p-5 max-w-sm shadow-2xl",children:[(0,s.jsx)("button",{onClick:m,className:"absolute top-2 right-2 p-1 hover:bg-white/10 rounded transition active:scale-95","aria-label":"Close",children:(0,s.jsx)(c.Z,{size:16,className:"text-gray-400"})}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-gradient-to-br from-warning to-gold flex items-center justify-center flex-shrink-0 animate-pulse-glow",children:(0,s.jsx)(u.Z,{size:20,className:"sm:w-6 sm:h-6 text-dark"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-warning uppercase tracking-wider font-bold",children:"Achievement Unlocked!"}),(0,s.jsx)("div",{className:"text-sm sm:text-base font-bold text-white mt-0.5",children:"New Achievement"})]})]}),(0,s.jsxs)("div",{className:"pl-0 sm:pl-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-2xl sm:text-3xl",children:t.icon}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-bold text-accent text-base sm:text-lg",children:t.title}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:t.description})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-3 pt-3 border-t border-dark-border text-xs",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(u.Z,{size:14,className:"text-electric-blue"}),(0,s.jsxs)("span",{className:"text-gray-400",children:["+",(0,s.jsx)("span",{className:"text-electric-blue font-bold",children:t.xpReward})," XP"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:"text-warning",children:"\uD83D\uDCB0"}),(0,s.jsxs)("span",{className:"text-gray-400",children:["+",(0,s.jsx)("span",{className:"text-warning font-bold",children:t.coinReward})," Coins"]})]})]})]})]})]})})},m=()=>{let e=(0,o.CT)(e=>e.achievementToasts),t=(0,o.CT)(e=>e.dismissAchievementToast),a=e[0],r=a?l.ACHIEVEMENT_DEFINITIONS.find(e=>e.id===a):null;return(0,s.jsx)(s.Fragment,{children:r&&(0,s.jsx)(d,{achievement:r,onClose:t})})};function p(e){let{children:t}=e;return(0,n.useSyncManager)(),(0,r.useEffect)(()=>{let e=o.CT.subscribe((e,t)=>{try{let t={userId:e.userId,username:e.username,email:e.email,proficiency:e.proficiency,maxPushupsInOneSet:e.maxPushupsInOneSet,isWorldRecordCandidate:e.isWorldRecordCandidate,totalXp:e.totalXp,coins:e.coins,currentRank:e.currentRank,currentStreak:e.currentStreak,longestStreak:e.longestStreak,lastWorkoutDate:e.lastWorkoutDate,workouts:e.workouts,achievements:e.achievements,unlockedAchievements:e.unlockedAchievements,personalBest:e.personalBest,dailyGoal:e.dailyGoal,streakFreezes:e.streakFreezes,powerUpPurchaseHistory:e.powerUpPurchaseHistory};localStorage.setItem("pushup-league-data",JSON.stringify(t))}catch(e){console.error("Error auto-saving to localStorage:",e)}});return()=>e()},[]),(0,r.useEffect)(()=>{try{let e=localStorage.getItem("pushup-league-data");if(e){let t=JSON.parse(e);o.CT.setState({userId:t.userId||o.CT.getState().userId,username:t.username||o.CT.getState().username,email:t.email||"",proficiency:t.proficiency||"beginner",maxPushupsInOneSet:t.maxPushupsInOneSet||10,isWorldRecordCandidate:t.isWorldRecordCandidate||!1,totalXp:t.totalXp||0,coins:t.coins||0,currentRank:t.currentRank||1,currentStreak:t.currentStreak||0,longestStreak:t.longestStreak||0,lastWorkoutDate:t.lastWorkoutDate||null,workouts:t.workouts||[],achievements:t.achievements||[],unlockedAchievements:t.unlockedAchievements||[],personalBest:t.personalBest||0,dailyGoal:t.dailyGoal||50,streakFreezes:t.streakFreezes||1,powerUpPurchaseHistory:t.powerUpPurchaseHistory||o.CT.getState().powerUpPurchaseHistory})}}catch(e){console.error("Error loading from localStorage:",e)}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m,{}),t]})}function h(e){let{children:t}=e,[a,n]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=setTimeout(()=>{n(!1)},2e3);return()=>clearTimeout(e)},[]),(0,s.jsxs)(s.Fragment,{children:[a&&(0,s.jsx)(i,{onLoadComplete:()=>n(!1)}),(0,s.jsx)("div",{className:a?"hidden":"block",children:(0,s.jsx)(p,{children:t})})]})}},8251:function(e,t,a){"use strict";a.r(t),a.d(t,{SyncManager:function(){return o},syncManager:function(){return l},useManualSync:function(){return u},useSyncManager:function(){return c}});var s=a(2249),r=a(2265),i=a(3754),n=a(6410);class o{static getInstance(){return o.instance||(o.instance=new o),o.instance}initialize(){(0,n.w7)(e=>{e?this.handleUserLogin(e):this.handleUserLogout()}),this.syncInterval=setInterval(()=>{this.performPeriodicSync()},3e4),this.loadFromLocalStorage()}async handleUserLogin(e){let t=i.CT.getState();try{console.log("\uD83D\uDD04 Loading user data from Firebase for:",e.uid);let a=await (0,n.et)(e.uid);a?(console.log("✅ Profile loaded from Firebase:",a),t.setUserProfile(a.email,a.proficiency,a.maxPushupsInOneSet),i.CT.setState({userId:a.userId,username:a.username,email:a.email,isAuthenticated:!0,proficiency:a.proficiency,maxPushupsInOneSet:a.maxPushupsInOneSet,isWorldRecordCandidate:a.isWorldRecordCandidate,waiverAccepted:a.waiverAccepted||!1,waiverAcceptedAt:a.waiverAcceptedAt||null,waiverVersion:a.waiverVersion||null,waiverSignatureName:a.waiverSignatureName||null,accountCreatedAt:a.accountCreatedAt||null,totalXp:a.totalXp,coins:a.coins,currentRank:a.currentRank,currentStreak:a.currentStreak,longestStreak:a.longestStreak,lastWorkoutDate:a.lastWorkoutDate,personalBest:a.personalBest,dailyGoal:a.dailyGoal,streakFreezes:a.streakFreezes,bodyWeightKg:a.bodyWeightKg||77,totalLifetimePushups:a.totalLifetimePushups||0,variationStats:a.variationStats||i.CT.getState().variationStats,variationPBs:a.variationPBs||i.CT.getState().variationPBs,purchasedTitles:a.purchasedTitles||[],activeTitle:a.activeTitle||null,unlockedAchievements:a.unlockedAchievements||[]})):console.warn("⚠️ No profile found in Firebase for user:",e.uid);let s=await (0,n.SB)(e.uid);console.log("\uD83D\uDCCA Loaded ".concat(s.length," workouts from Firebase")),s.length>0?i.CT.setState({workouts:s.map(e=>({id:e.id,date:e.date,pushups:e.pushups,sets:e.sets,xpEarned:e.xpEarned,coinsEarned:e.coinsEarned||0,goalCompleted:e.goalCompleted||!1,streakMultiplier:e.streakMultiplier,challengeBonus:e.challengeBonus,isLocked:e.isLocked,lockedAt:e.lockedAt}))}):console.warn("⚠️ No workouts found in Firebase for user:",e.uid);try{let t=await (0,n.Mp)(e.uid);t.length>0&&i.CT.setState({achievements:t.map(e=>({id:e.id,title:e.title,description:e.description,unlockedAt:e.unlockedAt,type:e.type}))})}catch(e){console.warn("Could not load achievements from Firebase:",e)}this.unsubscribeWorkouts=(0,n.vA)(e.uid,e=>{console.log("\uD83D\uDD14 Real-time update: ".concat(e.length," workouts")),i.CT.setState({workouts:e.map(e=>({id:e.id,date:e.date,pushups:e.pushups,sets:e.sets,xpEarned:e.xpEarned,coinsEarned:e.coinsEarned||0,goalCompleted:e.goalCompleted||!1,streakMultiplier:e.streakMultiplier,challengeBonus:e.challengeBonus,isLocked:e.isLocked,lockedAt:e.lockedAt}))}),this.saveToLocalStorage()}),this.saveToLocalStorage(),console.log("\uD83D\uDCBE Data saved to localStorage")}catch(e){console.error("❌ Error loading user data from Firebase:",e)}}handleUserLogout(){this.unsubscribeWorkouts&&(this.unsubscribeWorkouts(),this.unsubscribeWorkouts=null),this.saveToLocalStorage()}async syncToFirebase(){let e=i.CT.getState();if(!e.isAuthenticated||!e.userId){console.log("⏭️ Skipping sync - not authenticated");return}console.log("\uD83D\uDD04 Syncing to Firebase...");try{console.log("\uD83D\uDCE4 Uploading user profile to Firebase..."),await (0,n.Lj)(e.userId,{userId:e.userId,username:e.username,email:e.email,proficiency:e.proficiency,maxPushupsInOneSet:e.maxPushupsInOneSet,isWorldRecordCandidate:e.isWorldRecordCandidate,waiverAccepted:e.waiverAccepted,waiverAcceptedAt:e.waiverAcceptedAt,waiverVersion:e.waiverVersion,waiverSignatureName:e.waiverSignatureName,accountCreatedAt:e.accountCreatedAt,totalXp:e.totalXp,coins:e.coins,currentRank:e.currentRank,currentStreak:e.currentStreak,longestStreak:e.longestStreak,lastWorkoutDate:e.lastWorkoutDate,personalBest:e.personalBest,dailyGoal:e.dailyGoal,streakFreezes:e.streakFreezes,bodyWeightKg:e.bodyWeightKg,totalLifetimePushups:e.totalLifetimePushups,variationStats:e.variationStats,variationPBs:e.variationPBs,purchasedTitles:e.purchasedTitles,activeTitle:e.activeTitle,unlockedAchievements:e.unlockedAchievements}),console.log("✅ User profile synced to Firebase");let t=await (0,n.SB)(e.userId),a=new Set(t.map(e=>e.id)),s=0;for(let t of e.workouts)!a.has(t.id)&&(await (0,n.Mg)({...t,sets:t.sets,userId:e.userId,createdAt:null}),s++);s>0&&console.log("✅ Synced ".concat(s," new workout(s) to Firebase"));try{let t=await (0,n.Mp)(e.userId),a=new Set(t.map(e=>e.id));for(let t of e.achievements)a.has(t.id)||await (0,n.Sz)({...t,userId:e.userId})}catch(e){console.warn("Could not sync achievements to Firebase:",e)}this.lastSyncTimestamp=Date.now(),console.log("✅ Firebase sync complete")}catch(e){console.error("❌ Error syncing to Firebase:",e)}}async performPeriodicSync(){i.CT.getState().isAuthenticated&&await this.syncToFirebase(),this.saveToLocalStorage()}saveToLocalStorage(){let e=i.CT.getState(),t={userId:e.userId,username:e.username,email:e.email,proficiency:e.proficiency,maxPushupsInOneSet:e.maxPushupsInOneSet,isWorldRecordCandidate:e.isWorldRecordCandidate,waiverAccepted:e.waiverAccepted,waiverAcceptedAt:e.waiverAcceptedAt,waiverVersion:e.waiverVersion,waiverSignatureName:e.waiverSignatureName,accountCreatedAt:e.accountCreatedAt,totalXp:e.totalXp,coins:e.coins,currentRank:e.currentRank,currentStreak:e.currentStreak,longestStreak:e.longestStreak,lastWorkoutDate:e.lastWorkoutDate,workouts:e.workouts,achievements:e.achievements,personalBest:e.personalBest,dailyGoal:e.dailyGoal,streakFreezes:e.streakFreezes,powerUpPurchaseHistory:e.powerUpPurchaseHistory,bodyWeightKg:e.bodyWeightKg,totalLifetimePushups:e.totalLifetimePushups,variationStats:e.variationStats,variationPBs:e.variationPBs,purchasedTitles:e.purchasedTitles,activeTitle:e.activeTitle,unlockedAchievements:e.unlockedAchievements,lastSyncTimestamp:this.lastSyncTimestamp};try{localStorage.setItem("pushup-league-data",JSON.stringify(t))}catch(e){console.error("Error saving to localStorage:",e)}}loadFromLocalStorage(){try{let e=localStorage.getItem("pushup-league-data");if(e){let t=JSON.parse(e);i.CT.setState({userId:t.userId,username:t.username,email:t.email,proficiency:t.proficiency||"beginner",maxPushupsInOneSet:t.maxPushupsInOneSet||10,isWorldRecordCandidate:t.isWorldRecordCandidate||!1,waiverAccepted:t.waiverAccepted||!1,waiverAcceptedAt:t.waiverAcceptedAt||null,waiverVersion:t.waiverVersion||null,waiverSignatureName:t.waiverSignatureName||null,accountCreatedAt:t.accountCreatedAt||null,totalXp:t.totalXp||0,coins:t.coins||0,currentRank:t.currentRank||1,currentStreak:t.currentStreak||0,longestStreak:t.longestStreak||0,lastWorkoutDate:t.lastWorkoutDate||null,workouts:t.workouts||[],achievements:t.achievements||[],personalBest:t.personalBest||0,dailyGoal:t.dailyGoal||50,streakFreezes:t.streakFreezes||1,powerUpPurchaseHistory:t.powerUpPurchaseHistory||i.CT.getState().powerUpPurchaseHistory,bodyWeightKg:t.bodyWeightKg||77,totalLifetimePushups:t.totalLifetimePushups||0,variationStats:t.variationStats||i.CT.getState().variationStats,variationPBs:t.variationPBs||i.CT.getState().variationPBs,purchasedTitles:t.purchasedTitles||[],activeTitle:t.activeTitle||null,unlockedAchievements:t.unlockedAchievements||[]}),this.lastSyncTimestamp=t.lastSyncTimestamp||0}}catch(e){console.error("Error loading from localStorage:",e)}}async forceSyncNow(){await this.syncToFirebase(),this.saveToLocalStorage()}cleanup(){this.unsubscribeWorkouts&&this.unsubscribeWorkouts(),this.syncInterval&&clearInterval(this.syncInterval)}constructor(){(0,s._)(this,"unsubscribeWorkouts",null),(0,s._)(this,"syncInterval",null),(0,s._)(this,"lastSyncTimestamp",0)}}(0,s._)(o,"instance",void 0);let l=o.getInstance();function c(){(0,r.useEffect)(()=>(l.initialize(),()=>{l.cleanup()}),[])}function u(){return{syncNow:()=>l.forceSyncNow(),saveLocal:()=>l.saveToLocalStorage()}}},7335:function(){},2249:function(e,t,a){"use strict";function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{_:function(){return s}})},4891:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8301).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[790,358,139,47,779,971,117,744],function(){return e(e.s=6246)}),_N_E=e.O()}]);